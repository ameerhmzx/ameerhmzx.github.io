---
import Layout from "@layouts/BaseLayout.astro";
import Hero from "@components/Hero.astro";
import SectionHeading from "@components/SectionHeading.astro";
import Button from "@components/Button.astro";
import Icon from "@components/Icon.astro";

import { getCollection } from "astro:content";
import ProjectCard from "@components/ProjectCard.astro";

const featuredProjectSlugs = [
  "rashcam", "advertizers",
];

const featuredProjects = await getCollection("projects", ({ data, slug }) => {
  return (import.meta.env.PROD ? data.draft !== true : true) && featuredProjectSlugs.includes(slug);
});
featuredProjects.sort((a, b) => b.data.startDate - a.data.startDate);
---

<Layout title="Home">
  <Hero />
  <section id="projects" class="mx-auto container max-w-6xl flex flex-col gap-12 px-12 py-8">
    <SectionHeading name="projects-heading">
      Projects
    </SectionHeading>
    <div class="grid sm:grid-cols-1 max-w-5xl w-full self-center mt-4 gap-4">
      {featuredProjects.map((project) => (
        <ProjectCard project={project} />
      ))}
    </div>
    <div class="flex justify-center flex-wrap-reverse gap-4 items-center">
      <Button variant="text" href="/projects">
        View all projects
        <Icon slot="end-icon" icon="code" />
      </Button>
    </div>
  </section>
  <!--<section id="work" class="min-h-[100dvh] mx-auto container py-6">-->
  <!--  <SectionHeading>-->
  <!--    Work-->
  <!--  </SectionHeading>-->
  <!--</section>-->
</Layout>
